[{"C:\\Users\\123\\Documents\\GitHub\\chatverse\\frontend\\src\\index.js":"1","C:\\Users\\123\\Documents\\GitHub\\chatverse\\frontend\\src\\reportWebVitals.js":"2","C:\\Users\\123\\Documents\\GitHub\\chatverse\\frontend\\src\\app\\App.js":"3","C:\\Users\\123\\Documents\\GitHub\\chatverse\\frontend\\src\\app\\components\\Sign\\Sign.js":"4","C:\\Users\\123\\Documents\\GitHub\\chatverse\\frontend\\src\\app\\components\\Login\\Login.js":"5","C:\\Users\\123\\Documents\\GitHub\\chatverse\\frontend\\src\\app\\components\\ChatRooms\\ChatRooms.js":"6","C:\\Users\\123\\Documents\\GitHub\\chatverse\\frontend\\src\\app\\components\\ChatRoom\\ChatRoom.js":"7","C:\\Users\\123\\Documents\\GitHub\\chatverse\\frontend\\src\\app\\components\\Login\\cookie.js":"8","C:\\Users\\123\\Documents\\GitHub\\chatverse\\frontend\\src\\app\\components\\ChatRoom\\ChatBar.js":"9"},{"size":523,"mtime":1650109030800,"results":"10","hashOfConfig":"11"},{"size":375,"mtime":1650109030801,"results":"12","hashOfConfig":"11"},{"size":936,"mtime":1650109030602,"results":"13","hashOfConfig":"11"},{"size":3554,"mtime":1650259467767,"results":"14","hashOfConfig":"11"},{"size":2947,"mtime":1650259467742,"results":"15","hashOfConfig":"11"},{"size":7871,"mtime":1650259467775,"results":"16","hashOfConfig":"11"},{"size":23064,"mtime":1650259467737,"results":"17","hashOfConfig":"11"},{"size":684,"mtime":1650109030672,"results":"18","hashOfConfig":"11"},{"size":3041,"mtime":1650201344134,"results":"19","hashOfConfig":"11"},{"filePath":"20","messages":"21","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"22"},"ixzcu2",{"filePath":"23","messages":"24","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"22"},{"filePath":"25","messages":"26","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"22"},{"filePath":"27","messages":"28","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"29","messages":"30","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"31","messages":"32","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"33","messages":"34","errorCount":0,"fatalErrorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"35","messages":"36","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"37","usedDeprecatedRules":"22"},{"filePath":"38","messages":"39","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"40","usedDeprecatedRules":"22"},"C:\\Users\\123\\Documents\\GitHub\\chatverse\\frontend\\src\\index.js",[],["41","42"],"C:\\Users\\123\\Documents\\GitHub\\chatverse\\frontend\\src\\reportWebVitals.js",[],"C:\\Users\\123\\Documents\\GitHub\\chatverse\\frontend\\src\\app\\App.js",[],"C:\\Users\\123\\Documents\\GitHub\\chatverse\\frontend\\src\\app\\components\\Sign\\Sign.js",["43","44"],"C:\\Users\\123\\Documents\\GitHub\\chatverse\\frontend\\src\\app\\components\\Login\\Login.js",["45","46","47"],"C:\\Users\\123\\Documents\\GitHub\\chatverse\\frontend\\src\\app\\components\\ChatRooms\\ChatRooms.js",["48"],"C:\\Users\\123\\Documents\\GitHub\\chatverse\\frontend\\src\\app\\components\\ChatRoom\\ChatRoom.js",["49","50","51","52","53","54","55","56","57","58"],"C:\\Users\\123\\Documents\\GitHub\\chatverse\\frontend\\src\\app\\components\\Login\\cookie.js",["59"],"export function setCookie(name,value)\r\n{\r\n    var Days = 30;\r\n    var exp = new Date();\r\n    exp.setTime(exp.getTime() + Days*24*60*60*1000);\r\n    document.cookie = name + \"=\"+ escape (value) + \";path=/;expires=\" + exp.toGMTString();\r\n}\r\n\r\nexport function getCookie(name)\r\n{\r\n    var arr,reg=new RegExp(\"(^| )\"+name+\"=([^;]*)(;|$)\");\r\n \r\n    if(arr=document.cookie.match(reg))\r\n \r\n        return unescape(arr[2]);\r\n    else\r\n        return null;\r\n}\r\n\r\nexport function delCookie(name)\r\n{\r\n    var exp = new Date();\r\n    exp.setTime(exp.getTime() - 1);\r\n    var cval=getCookie(name);\r\n    if(cval!=null)\r\n        document.cookie= name + \"=\"+cval+\";path=/;expires=\"+exp.toGMTString();\r\n}","C:\\Users\\123\\Documents\\GitHub\\chatverse\\frontend\\src\\app\\components\\ChatRoom\\ChatBar.js",["60","61","62"],"import React, { useEffect } from \"react\";\r\nimport \"./ChatBar.css\"\r\n\r\nvar idx_max = 0\r\n\r\nvar chat_socket = null;\r\n\r\nvar timeout\r\n\r\nconst ChatBar = () => {\r\n\r\n    const [ text, setText ] = React.useState(\"\")\r\n\r\n\r\n\r\n    React.useEffect(()=>{\r\n        initSocket()\r\n    },[])\r\n\r\n    const [ messages, setMessages ] = React.useState([])\r\n\r\n    const initSocket = () => {\r\n        // 从 URL Params 获取 roon name\r\n        const queryString = window.location.search;\r\n        const urlParams = new URLSearchParams(queryString);\r\n        const roomName = urlParams.get('roomname');\r\n        const wss_protocol = (window.location.protocol == 'https:') ? 'wss://': 'ws://';\r\n        chat_socket = new WebSocket(\r\n            wss_protocol + window.location.host + '/ws/chat/'  + roomName + '/'\r\n        );\r\n\r\n        console.log(wss_protocol + window.location.host + '/ws/chat/'  + roomName + '/')\r\n        // 建立webchat_socket连接时触发此方法\r\n        chat_socket.onopen = function(e) {\r\n            // Do nothing\r\n        }\r\n\r\n        // 从后台接收到数据时触发此方法\r\n        chat_socket.onmessage = function(e) {\r\n            const data = JSON.parse(e.data);\r\n            console.log(messages)\r\n            \r\n            \r\n            setMessages(messages => {\r\n                let msgs = messages.map(m=>m)\r\n                msgs.push({...data, idx:idx_max})\r\n                if(msgs.length>5){\r\n                    msgs = msgs.slice(1)\r\n                }\r\n                return msgs\r\n            })\r\n            idx_max += 1\r\n            \r\n            if(timeout) clearTimeout(timeout)\r\n            timeout = setTimeout(()=>{\r\n                setMessages([])\r\n                clearTimeout(timeout)\r\n            },5000,idx_max) // 5秒后全部消息消失\r\n            \r\n        };\r\n        \r\n    }\r\n\r\n    // const removeMsg = (idx) => {\r\n    //     let msgs = []\r\n    //     messages.forEach(m=>{if(idx===m.idx)msgs.push(m)})\r\n    //     setMessages(msgs)\r\n    // }\r\n\r\n\r\n    return (\r\n        <div className=\"ChatBar\">\r\n            <div className=\"ChatBar-messages\">\r\n                {messages.map(m=>(\r\n                    <div key={Math.random()} className=\"ChatBar-message\">\r\n                        {m.idx}: {m.message}\r\n                    </div>\r\n                ))}\r\n            </div>\r\n\r\n            <div className=\"ChatBar-actions\">\r\n                <input placeholder=\"Massage\" style={{fontFamily:\"Cochin\", borderRadius: '10px'}} value={text} onChange={e=>{\r\n                    setText(e.target.value)\r\n                }}>\r\n                </input>\r\n\r\n\r\n                <button className=\"SendButton\" style={{fontFamily:\"Cochin\",borderRadius: '10px'}} onClick={()=>{\r\n                    console.log(\"Send\")\r\n                    if (!chat_socket) { console.log(\"error\"); return }\r\n                    chat_socket.send(JSON.stringify({\r\n                        'message': text\r\n                    }));\r\n                }}>Send</button>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ChatBar",{"ruleId":"63","replacedBy":"64"},{"ruleId":"65","replacedBy":"66"},{"ruleId":"67","severity":1,"message":"68","line":3,"column":10,"nodeType":"69","messageId":"70","endLine":3,"endColumn":13},{"ruleId":"71","severity":1,"message":"72","line":51,"column":39,"nodeType":"73","messageId":"74","endLine":51,"endColumn":49},{"ruleId":"67","severity":1,"message":"75","line":3,"column":10,"nodeType":"69","messageId":"70","endLine":3,"endColumn":19},{"ruleId":"67","severity":1,"message":"76","line":12,"column":10,"nodeType":"69","messageId":"70","endLine":12,"endColumn":15},{"ruleId":"67","severity":1,"message":"77","line":12,"column":17,"nodeType":"69","messageId":"70","endLine":12,"endColumn":25},{"ruleId":"67","severity":1,"message":"78","line":1,"column":19,"nodeType":"69","messageId":"70","endLine":1,"endColumn":24},{"ruleId":"79","severity":1,"message":"80","line":225,"column":25,"nodeType":"69","messageId":"81","endLine":225,"endColumn":26},{"ruleId":"82","severity":1,"message":"83","line":226,"column":30,"nodeType":"84","messageId":"74","endLine":226,"endColumn":32},{"ruleId":"82","severity":1,"message":"83","line":240,"column":30,"nodeType":"84","messageId":"74","endLine":240,"endColumn":32},{"ruleId":"82","severity":1,"message":"83","line":254,"column":30,"nodeType":"84","messageId":"74","endLine":254,"endColumn":32},{"ruleId":"82","severity":1,"message":"83","line":257,"column":30,"nodeType":"84","messageId":"74","endLine":257,"endColumn":32},{"ruleId":"67","severity":1,"message":"85","line":317,"column":15,"nodeType":"69","messageId":"70","endLine":317,"endColumn":20},{"ruleId":"82","severity":1,"message":"83","line":544,"column":56,"nodeType":"84","messageId":"74","endLine":544,"endColumn":58},{"ruleId":"86","severity":1,"message":"87","line":589,"column":7,"nodeType":"88","endLine":589,"endColumn":21,"suggestions":"89"},{"ruleId":"86","severity":1,"message":"90","line":607,"column":7,"nodeType":"88","endLine":607,"endColumn":14,"suggestions":"91"},{"ruleId":"86","severity":1,"message":"92","line":619,"column":7,"nodeType":"88","endLine":619,"endColumn":17,"suggestions":"93"},{"ruleId":"94","severity":1,"message":"95","line":13,"column":8,"nodeType":"96","messageId":"97","endLine":13,"endColumn":38},{"ruleId":"67","severity":1,"message":"98","line":1,"column":17,"nodeType":"69","messageId":"70","endLine":1,"endColumn":26},{"ruleId":"86","severity":1,"message":"99","line":18,"column":7,"nodeType":"88","endLine":18,"endColumn":9,"suggestions":"100"},{"ruleId":"82","severity":1,"message":"83","line":27,"column":56,"nodeType":"84","messageId":"74","endLine":27,"endColumn":58},"no-native-reassign",["101"],"no-negated-in-lhs",["102"],"no-unused-vars","'API' is defined but never used.","Identifier","unusedVar","no-dupe-keys","Duplicate key 'fontFamily'.","ObjectExpression","unexpected","'getCookie' is defined but never used.","'title' is assigned a value but never used.","'setTitle' is assigned a value but never used.","'Input' is defined but never used.","no-redeclare","'e' is already defined.","redeclared","eqeqeq","Expected '===' and instead saw '=='.","BinaryExpression","'remap' is assigned a value but never used.","react-hooks/exhaustive-deps","React Hook React.useEffect has a missing dependency: 'newCamera'. Either include it or remove the dependency array.","ArrayExpression",["103"],"React Hook React.useEffect has missing dependencies: 'animate', 'initSocket', 'loadFBX', 'loadVRM', and 'newLight'. Either include them or remove the dependency array.",["104"],"React Hook React.useEffect has a missing dependency: 'initHolistic'. Either include it or remove the dependency array.",["105"],"no-cond-assign","Expected a conditional expression and instead saw an assignment.","AssignmentExpression","missing","'useEffect' is defined but never used.","React Hook React.useEffect has a missing dependency: 'initSocket'. Either include it or remove the dependency array.",["106"],"no-global-assign","no-unsafe-negation",{"desc":"107","fix":"108"},{"desc":"109","fix":"110"},{"desc":"111","fix":"112"},{"desc":"113","fix":"114"},"Update the dependencies array to be: [newCamera, videoElement]",{"range":"115","text":"116"},"Update the dependencies array to be: [animate, initSocket, loadFBX, loadVRM, newLight, scene]",{"range":"117","text":"118"},"Update the dependencies array to be: [holistic, initHolistic]",{"range":"119","text":"120"},"Update the dependencies array to be: [initSocket]",{"range":"121","text":"122"},[21579,21593],"[newCamera, videoElement]",[22016,22023],"[animate, initSocket, loadFBX, loadVRM, newLight, scene]",[22381,22391],"[holistic, initHolistic]",[268,270],"[initSocket]"]